{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./block/src/lazy-youtube-block.js","webpack:///external {\"this\":[\"wp\",\"blocks\"]}","webpack:///external {\"this\":[\"wp\",\"components\"]}","webpack:///external {\"this\":[\"wp\",\"editor\"]}","webpack:///external {\"this\":[\"wp\",\"element\"]}","webpack:///external {\"this\":[\"wp\",\"i18n\"]}"],"names":["registerBlockType","title","__","description","icon","category","example","attributes","youtubeURL","videoID","type","edit","setAttributes","youtubeVideoURLTest","RegExp","validateAndChangeURL","test","parts","split","includes","moreParts","width","position","left","top","transform","filter","assets","save"],"mappings":"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","file":"lazy-youtube-block.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./block/src/lazy-youtube-block.js\");\n","/**\r\n * @param {{ youtubeIcon: string }} assets - Assets from script localization youtubeIcon is the path to the youtube icon svg\r\n */\r\n\r\nimport { registerBlockType } from '@wordpress/blocks';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { InspectorControls, InnerBlocks } from '@wordpress/editor';\r\nimport { PanelBody, TextControl } from '@wordpress/components';\r\n\r\nregisterBlockType( 'lazy-youtube/lazy-youtube-block', {\r\n    title: __('Lazy youtube', 'lazy-youtube'),\r\n    description: __('A youtube embed that only loads Youtube scripts when needed.', 'lazy-youtube'),\r\n    icon: 'video-alt3',\r\n    category: 'embed',\r\n    example: {\r\n        attributes: {\r\n            youtubeURL: 'https://www.youtube.com/watch?v=NpEaa2P7qZI',\r\n            videoID: 'NpEaa2P7qZI',\r\n        },\r\n    },\r\n    attributes: {\r\n        /**\r\n         * URL that the user inputs\r\n         */\r\n        youtubeURL: {\r\n            type: \"string\",\r\n        },\r\n        /**\r\n         * Youtube video ID, parsed from youtubeURL\r\n         */\r\n        videoID: {\r\n            type: \"string\",\r\n        },\r\n    },\r\n    edit({ attributes, setAttributes }) {\r\n        const { youtubeURL } = attributes;\r\n        // Optional http, https, www - require youtube.com/watch?v= with a video id behind it\r\n        const youtubeVideoURLTest = new RegExp(/^(http(s)?:\\/\\/)?(www\\.)?youtube\\.com\\/watch\\?v=[a-zA-Z0-9&=]+$/);\r\n\r\n        /**\r\n         * If the url is a youtube video url change to embed url and set embed url on attributes\r\n         * @param {string} youtubeURL Url user put in\r\n         */\r\n        const validateAndChangeURL = youtubeURL => {\r\n            setAttributes({youtubeURL});\r\n            \r\n            // If it is not a youtube url do nothing else\r\n            if(!youtubeVideoURLTest.test(youtubeURL)) {\r\n                return;\r\n            }\r\n\r\n            // Extract video ID and set embed url, TODO: Change to positive lookbehind when browsersupport gets better\r\n            // would be: const videoID = /(?<=v=)[^&]+/.exec(youtubeURL);\r\n            let videoID;\r\n            const parts = youtubeURL.split('v=');\r\n            if(parts[1].includes('&')) {\r\n                const moreParts = parts[1].split('&');\r\n                videoID = moreParts[0];\r\n            } else {\r\n                videoID = parts[1];\r\n            }\r\n            setAttributes({ videoID });\r\n        }\r\n        \r\n        return <div>\r\n            <InspectorControls>\r\n                <PanelBody\r\n                    title={ __('Youtube embed options', 'lazy-youtube') }\r\n                >\r\n                    <TextControl\r\n                        label={ __('Youtube video link', 'lazy-youtube') }\r\n                        help={ __('Youtube video link or embed link. allowed format is [https://www.youtube.com/watch?v=video_id].', 'lazy-youtube') }\r\n                        value={ youtubeURL }\r\n                        onChange={ validateAndChangeURL }\r\n                    />\r\n                </PanelBody>\r\n            </InspectorControls>\r\n            <InnerBlocks\r\n                template={[[\"core/image\", {}]]}\r\n                templateLock={ true }\r\n            />\r\n            {/* Center image and change to a red color with the filter */}\r\n            <img\r\n                className=\"youtube-play-icon\"\r\n                style={{\r\n                    width: '6rem',\r\n                    position: 'absolute',\r\n                    left: '50%',\r\n                    top: '50%',\r\n                    transform: 'translate(-50%, -50%)',\r\n                    filter: 'invert(10%) sepia(99%) saturate(10000%) hue-rotate(0deg)',\r\n                }}\r\n                src={ assets['youtubeIcon'] }\r\n            />\r\n        </div>;\r\n    },\r\n    save({ attributes }) {\r\n        const { videoID } = attributes;\r\n        \r\n        return <div>\r\n            <div\r\n                className=\"w-embed-banner position-relative\"\r\n                id={ videoID }\r\n                onclick={ `loadEmbed${videoID}(this);` }\r\n            >\r\n                <InnerBlocks.Content />\r\n                {/* Center image and change to a red color with the filter */}\r\n                <img\r\n                    className=\"youtube-play-icon\"\r\n                    style={{\r\n                        width: '6rem',\r\n                        position: 'absolute',\r\n                        left: '50%',\r\n                        top: '50%',\r\n                        transform: 'translate(-50%, -50%)',\r\n                        filter: 'invert(10%) sepia(99%) saturate(10000%) hue-rotate(0deg)',\r\n                    }}\r\n                    src={ assets['youtubeIcon'] }\r\n                />\r\n            </div>\r\n            <script>\r\n                {\r\n                    // Construct onclick function for front-end\r\n                    `function loadEmbed${videoID}(e) {\r\n\t\t\t\t\t\tvar wrapper = e.parentElement;\r\n\t\t\t\t\t\tvar width = e.clientWidth;\r\n\t\t\t\t\t\tvar height = e.clientHeight;\r\n                        wrapper.removeChild(e);\r\n\r\n\t\t\t\t\t\tvar video = document.createElement(\"iframe\");\r\n\t\t\t\t\t\tvideo.width = width;\r\n\t\t\t\t\t\tvideo.height = height;\r\n                        video.src = \"https://www.youtube.com/embed/${videoID}?autoplay=1\";\r\n\r\n                        wrapper.appendChild(video);\r\n                    }`\r\n                }\r\n            </script>\r\n        </div>;\r\n    },\r\n} );","(function() { module.exports = this[\"wp\"][\"blocks\"]; }());","(function() { module.exports = this[\"wp\"][\"components\"]; }());","(function() { module.exports = this[\"wp\"][\"editor\"]; }());","(function() { module.exports = this[\"wp\"][\"element\"]; }());","(function() { module.exports = this[\"wp\"][\"i18n\"]; }());"],"sourceRoot":""}